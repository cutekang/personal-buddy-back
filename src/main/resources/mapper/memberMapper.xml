<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.personalbuddyback.mapper.MemberMapper">

<!-- 회원가입 -->
    <insert id="insert" parameterType="MemberVO">
        INSERT INTO TBL_MEMBER
        VALUES(#{id}, #{memberNickName}, #{memberStatusMessage}, #{memberName},
               #{memberGender}, #{memberPassword}, #{memberBirth}, #{memberPhone}, #{memberEmail},
               #{memberImgName}, #{memberImgPath}, #{memberAdmin}, #{memberCreateDate}, #{memberPoint},
               #{memberTermServiceAgree}, #{memberTermInformationAgree}, #{memberTermLocationAgree},
               #{memberTermPromotionAgree})
    </insert>

<!-- 이메일 중복 체크 -->
    <select id="checkEmail" parameterType="string" resultType="int">
        SELECT COUNT(*)
        FROM TBL_MEMBER
        WHERE MEMBER_EMAIL = #{memberEmail}
    </select>

<!-- 전화번호 중복 체크 -->
    <select id="checkPhone" parameterType="string" resultType="int">
        SELECT COUNT(*)
        FROM TBL_MEMBER
        WHERE MEMBER_PHONE = #{memberPhone}
    </select>

<!-- 닉네임 중복 체크 -->
    <select id="checkNickname" parameterType="string" resultType="int">
        SELECT COUNT(*)
        FROM TBL_MEMBER
        WHERE MEMBER_NICKNAME = #{memberNickName}
    </select>

<!-- ID 생성 -->
    <select id="selectNextId" resultType="Long">
        SELECT SEQ_MEMBER.NEXTVAL
        FROM DUAL
    </select>

<!--  -->

<!-- 로그인 -->
    <select id="selectOne" parameterType="MemberVO">
        SELECT MEMBER_EMAIL, MEMBER_PASSWORD
        FROM TBL_MEMBER
        WHERE MEMBER_EMAIL = ${memberEmail} AND MEMBER_PASSWORD = ${memberPassword}
    </select>
</mapper>